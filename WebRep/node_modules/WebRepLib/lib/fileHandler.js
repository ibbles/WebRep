const filesystem = require("fs");
const iconv = require("iconv-lite");


function guessEncoding(path) {
    const data = filesystem.readFileSync(path);
    const invalidCharacterIndex = iconv.decode(data, "utf8").indexOf('ï¿½');
    const assumeIso = invalidCharacterIndex >= 0;
    const encoding = assumeIso ? "iso-8859-15" : "utf8";
    return encoding;
}


exports.guessEncoding = guessEncoding;
