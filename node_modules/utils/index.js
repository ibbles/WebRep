
const filesystem = require('fs');
const iconv = require('iconv-lite');

function guessEncoding(path) {
    var fileContents = filesystem.readFileSync(path);
    const indexOfUtf8Failure = iconv.decode(fileContents, 'utf8').indexOf('ï¿½');
    const isIsoMaybe = indexOfUtf8Failure >= 0;
    const encoding = isIsoMaybe ? 'iso-8859-15' : "utf8";
    return encoding;
}

exports.guessEncoding = guessEncoding;
